<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (0)
 -->
<!-- Title: GraphStoragePattern Pages: 1 -->
<svg width="505pt" height="483pt"
 viewBox="0.00 0.00 504.88 482.75" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 478.75)">
<title>GraphStoragePattern</title>
<polygon fill="#f5f5f5" stroke="none" points="-4,4 -4,-478.75 500.88,-478.75 500.88,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_instance</title>
<polygon fill="mistyrose" stroke="black" points="0,-8 0,-351 211,-351 211,-8 0,-8"/>
<text text-anchor="middle" x="105.5" y="-333.7" font-family="Arial" font-size="14.00">Instance Layer (Patient&#45;Specific)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_type</title>
<polygon fill="lightgreen" stroke="black" points="289.5,-71 289.5,-281 495.25,-281 495.25,-71 289.5,-71"/>
<text text-anchor="middle" x="392.38" y="-263.7" font-family="Arial" font-size="14.00">Type Layer (Shared Definitions)</text>
</g>
<!-- DocRef -->
<g id="node1" class="node">
<title>DocRef</title>
<polygon fill="#ffccbc" stroke="black" points="183.12,-212.5 26.88,-212.5 26.88,-123.5 183.12,-123.5 183.12,-212.5"/>
<text text-anchor="middle" x="105" y="-198.05" font-family="Arial" font-size="11.00">DocumentReferenceNode</text>
<text text-anchor="middle" x="105" y="-184.55" font-family="Arial" font-size="11.00">uuid: doc&#45;123</text>
<text text-anchor="middle" x="105" y="-171.05" font-family="Arial" font-size="11.00">patient_id: patient&#45;456</text>
<text text-anchor="middle" x="105" y="-157.55" font-family="Arial" font-size="11.00">file_id: file&#45;789</text>
<text text-anchor="middle" x="105" y="-144.05" font-family="Arial" font-size="11.00">document_name: Lab Report</text>
<text text-anchor="middle" x="105" y="-130.55" font-family="Arial" font-size="11.00">report_date: 2024&#45;12&#45;15</text>
</g>
<!-- ObsType1 -->
<g id="node4" class="node">
<title>ObsType1</title>
<polygon fill="#c5e1a5" stroke="black" points="480.88,-248.75 302.88,-248.75 302.88,-173.25 480.88,-173.25 480.88,-248.75"/>
<text text-anchor="middle" x="391.88" y="-234.3" font-family="Arial" font-size="11.00">ObservationTypeNode</text>
<text text-anchor="middle" x="391.88" y="-220.8" font-family="Arial" font-size="11.00">catalog_id: cat&#45;001</text>
<text text-anchor="middle" x="391.88" y="-207.3" font-family="Arial" font-size="11.00">name: Cholesterol Total</text>
<text text-anchor="middle" x="391.88" y="-193.8" font-family="Arial" font-size="11.00">unit: mg/dL</text>
<text text-anchor="middle" x="391.88" y="-180.3" font-family="Arial" font-size="11.00">aliases: [Total Cholesterol, CHOL]</text>
</g>
<!-- DocRef&#45;&gt;ObsType1 -->
<g id="edge1" class="edge">
<title>DocRef&#45;&gt;ObsType1</title>
<path fill="none" stroke="black" d="M183.47,-179.69C216.69,-184.71 255.93,-190.63 291.28,-195.97"/>
<polygon fill="black" stroke="black" points="290.7,-199.42 301.11,-197.45 291.74,-192.5 290.7,-199.42"/>
<text text-anchor="middle" x="250.25" y="-195.85" font-family="Arial" font-size="10.00">CONTAINS</text>
</g>
<!-- ObsType2 -->
<g id="node5" class="node">
<title>ObsType2</title>
<polygon fill="#c5e1a5" stroke="black" points="455.38,-154.75 328.38,-154.75 328.38,-79.25 455.38,-79.25 455.38,-154.75"/>
<text text-anchor="middle" x="391.88" y="-140.3" font-family="Arial" font-size="11.00">ObservationTypeNode</text>
<text text-anchor="middle" x="391.88" y="-126.8" font-family="Arial" font-size="11.00">catalog_id: cat&#45;002</text>
<text text-anchor="middle" x="391.88" y="-113.3" font-family="Arial" font-size="11.00">name: LDL Cholesterol</text>
<text text-anchor="middle" x="391.88" y="-99.8" font-family="Arial" font-size="11.00">unit: mg/dL</text>
<text text-anchor="middle" x="391.88" y="-86.3" font-family="Arial" font-size="11.00">aliases: [LDL, LDL&#45;C]</text>
</g>
<!-- DocRef&#45;&gt;ObsType2 -->
<g id="edge2" class="edge">
<title>DocRef&#45;&gt;ObsType2</title>
<path fill="none" stroke="black" d="M183.47,-154.13C225.03,-146.69 275.99,-137.57 317,-130.23"/>
<polygon fill="black" stroke="black" points="317.57,-133.68 326.79,-128.47 316.33,-126.79 317.57,-133.68"/>
<text text-anchor="middle" x="250.25" y="-149.57" font-family="Arial" font-size="10.00">CONTAINS</text>
</g>
<!-- ObsVal1 -->
<g id="node2" class="node">
<title>ObsVal1</title>
<polygon fill="#ffccbc" stroke="black" points="185,-319.5 25,-319.5 25,-230.5 185,-230.5 185,-319.5"/>
<text text-anchor="middle" x="105" y="-305.05" font-family="Arial" font-size="11.00">ObservationValueNode</text>
<text text-anchor="middle" x="105" y="-291.55" font-family="Arial" font-size="11.00">uuid: obs&#45;val&#45;1</text>
<text text-anchor="middle" x="105" y="-278.05" font-family="Arial" font-size="11.00">value: 185</text>
<text text-anchor="middle" x="105" y="-264.55" font-family="Arial" font-size="11.00">unit: mg/dL</text>
<text text-anchor="middle" x="105" y="-251.05" font-family="Arial" font-size="11.00">observation_date: 2024&#45;12&#45;15</text>
<text text-anchor="middle" x="105" y="-237.55" font-family="Arial" font-size="11.00">patient_id: patient&#45;456</text>
</g>
<!-- ObsVal2 -->
<g id="node3" class="node">
<title>ObsVal2</title>
<polygon fill="#ffccbc" stroke="black" points="185,-105.5 25,-105.5 25,-16.5 185,-16.5 185,-105.5"/>
<text text-anchor="middle" x="105" y="-91.05" font-family="Arial" font-size="11.00">ObservationValueNode</text>
<text text-anchor="middle" x="105" y="-77.55" font-family="Arial" font-size="11.00">uuid: obs&#45;val&#45;2</text>
<text text-anchor="middle" x="105" y="-64.05" font-family="Arial" font-size="11.00">value: 110</text>
<text text-anchor="middle" x="105" y="-50.55" font-family="Arial" font-size="11.00">unit: mg/dL</text>
<text text-anchor="middle" x="105" y="-37.05" font-family="Arial" font-size="11.00">observation_date: 2024&#45;12&#45;15</text>
<text text-anchor="middle" x="105" y="-23.55" font-family="Arial" font-size="11.00">patient_id: patient&#45;456</text>
</g>
<!-- ObsType1&#45;&gt;ObsVal1 -->
<g id="edge3" class="edge">
<title>ObsType1&#45;&gt;ObsVal1</title>
<path fill="none" stroke="black" d="M302.43,-230.87C268.66,-238.46 230.13,-247.11 196.2,-254.74"/>
<polygon fill="black" stroke="black" points="195.82,-251.23 186.83,-256.84 197.35,-258.06 195.82,-251.23"/>
<text text-anchor="middle" x="250.25" y="-251.23" font-family="Arial" font-size="10.00">HAS_VALUE</text>
</g>
<!-- ObsType2&#45;&gt;ObsVal2 -->
<g id="edge4" class="edge">
<title>ObsType2&#45;&gt;ObsVal2</title>
<path fill="none" stroke="black" d="M328.18,-104.67C289.52,-97.08 239.29,-87.2 196.38,-78.77"/>
<polygon fill="black" stroke="black" points="197.33,-75.39 186.84,-76.89 195.98,-82.25 197.33,-75.39"/>
<text text-anchor="middle" x="250.25" y="-96.52" font-family="Arial" font-size="10.00">HAS_VALUE</text>
</g>
<!-- Note -->
<g id="node6" class="node">
<title>Note</title>
<polygon fill="lightyellow" stroke="black" stroke-dasharray="5,2" points="177.12,-474.75 26.88,-474.75 26.88,-359.25 183.12,-359.25 183.12,-468.75 177.12,-474.75"/>
<polyline fill="none" stroke="black" stroke-dasharray="5,2" points="177.12,-474.75 177.12,-468.75"/>
<polyline fill="none" stroke="black" stroke-dasharray="5,2" points="183.12,-468.75 177.12,-468.75"/>
<text text-anchor="middle" x="105" y="-460.3" font-family="Arial" font-size="11.00">Critical Pattern:</text>
<text text-anchor="middle" x="105" y="-446.8" font-family="Arial" font-size="11.00">Instanceâ†’Type separation</text>
<text text-anchor="middle" x="105" y="-433.3" font-family="Arial" font-size="11.00">for tenant scoping.</text>
<text text-anchor="middle" x="105" y="-406.8" font-family="Arial" font-size="11.00">Always query Instance nodes</text>
<text text-anchor="middle" x="105" y="-393.3" font-family="Arial" font-size="11.00">(patient&#45;specific) first,</text>
<text text-anchor="middle" x="105" y="-379.8" font-family="Arial" font-size="11.00">then traverse to Type nodes</text>
<text text-anchor="middle" x="105" y="-366.3" font-family="Arial" font-size="11.00">(shared definitions).</text>
</g>
</g>
</svg>
