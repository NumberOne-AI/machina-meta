<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (0)
 -->
<!-- Title: DatabaseLayer Pages: 1 -->
<svg width="1142pt" height="1963pt"
 viewBox="0.00 0.00 1142.38 1963.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 1959)">
<title>DatabaseLayer</title>
<polygon fill="#f5f5f5" stroke="none" points="-4,4 -4,-1959 1138.38,-1959 1138.38,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_postgres</title>
<polygon fill="lightblue" stroke="black" points="270.38,-1228 270.38,-1947 431.88,-1947 431.88,-1228 270.38,-1228"/>
<text text-anchor="middle" x="351.12" y="-1929.7" font-family="Arial" font-size="14.00">PostgreSQL (Port 5432)</text>
<text text-anchor="middle" x="351.12" y="-1913.95" font-family="Arial" font-size="14.00">Relational Database</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_neo4j</title>
<polygon fill="lightgreen" stroke="black" points="283.25,-375 283.25,-766 1126.38,-766 1126.38,-375 283.25,-375"/>
<text text-anchor="middle" x="704.81" y="-748.7" font-family="Arial" font-size="14.00">Neo4j (Port 7474, 7687)</text>
<text text-anchor="middle" x="704.81" y="-732.95" font-family="Arial" font-size="14.00">Graph Database</text>
<text text-anchor="middle" x="704.81" y="-701.2" font-family="Arial" font-size="14.00">Instance→Type Pattern for Multi&#45;tenancy</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_redis</title>
<polygon fill="lightyellow" stroke="black" points="274.25,-774 274.25,-1220 427,-1220 427,-774 274.25,-774"/>
<text text-anchor="middle" x="350.62" y="-1202.7" font-family="Arial" font-size="14.00">Redis (Port 6379)</text>
<text text-anchor="middle" x="350.62" y="-1186.95" font-family="Arial" font-size="14.00">Cache &amp; Pub/Sub</text>
</g>
<g id="clust4" class="cluster">
<title>cluster_qdrant</title>
<polygon fill="lightpink" stroke="black" points="273.5,-8 273.5,-367 427.75,-367 427.75,-8 273.5,-8"/>
<text text-anchor="middle" x="350.62" y="-349.7" font-family="Arial" font-size="14.00">Qdrant (Port 6333)</text>
<text text-anchor="middle" x="350.62" y="-333.95" font-family="Arial" font-size="14.00">Vector Database</text>
</g>
<g id="clust5" class="cluster">
<title>cluster_services</title>
<polygon fill="white" stroke="black" points="8,-738 8,-1030 170.5,-1030 170.5,-738 8,-738"/>
<text text-anchor="middle" x="89.25" y="-1012.7" font-family="Arial" font-size="14.00">Backend Services</text>
</g>
<!-- pg_users -->
<g id="node1" class="node">
<title>pg_users</title>
<path fill="skyblue" stroke="black" d="M404.75,-1804.42C404.75,-1808.89 380.49,-1812.52 350.62,-1812.52 320.76,-1812.52 296.5,-1808.89 296.5,-1804.42 296.5,-1804.42 296.5,-1731.58 296.5,-1731.58 296.5,-1727.11 320.76,-1723.48 350.62,-1723.48 380.49,-1723.48 404.75,-1727.11 404.75,-1731.58 404.75,-1731.58 404.75,-1804.42 404.75,-1804.42"/>
<path fill="none" stroke="black" d="M404.75,-1804.42C404.75,-1799.96 380.49,-1796.33 350.62,-1796.33 320.76,-1796.33 296.5,-1799.96 296.5,-1804.42"/>
<text text-anchor="middle" x="350.62" y="-1784.97" font-family="Arial" font-size="12.00">users</text>
<text text-anchor="middle" x="350.62" y="-1756.72" font-family="Arial" font-size="12.00">user_id, email,</text>
<text text-anchor="middle" x="350.62" y="-1742.47" font-family="Arial" font-size="12.00">google_id, profile</text>
</g>
<!-- pg_sessions -->
<g id="node2" class="node">
<title>pg_sessions</title>
<path fill="skyblue" stroke="black" d="M411.88,-1697.42C411.88,-1701.89 384.42,-1705.52 350.62,-1705.52 316.83,-1705.52 289.38,-1701.89 289.38,-1697.42 289.38,-1697.42 289.38,-1624.58 289.38,-1624.58 289.38,-1620.11 316.83,-1616.48 350.62,-1616.48 384.42,-1616.48 411.88,-1620.11 411.88,-1624.58 411.88,-1624.58 411.88,-1697.42 411.88,-1697.42"/>
<path fill="none" stroke="black" d="M411.88,-1697.42C411.88,-1692.96 384.42,-1689.33 350.62,-1689.33 316.83,-1689.33 289.38,-1692.96 289.38,-1697.42"/>
<text text-anchor="middle" x="350.62" y="-1677.97" font-family="Arial" font-size="12.00">sessions</text>
<text text-anchor="middle" x="350.62" y="-1649.72" font-family="Arial" font-size="12.00">session_id, user_id,</text>
<text text-anchor="middle" x="350.62" y="-1635.47" font-family="Arial" font-size="12.00">token, expires_at</text>
</g>
<!-- pg_patients -->
<g id="node3" class="node">
<title>pg_patients</title>
<path fill="skyblue" stroke="black" d="M418.62,-1588.44C418.62,-1593.89 388.15,-1598.31 350.62,-1598.31 313.1,-1598.31 282.62,-1593.89 282.62,-1588.44 282.62,-1588.44 282.62,-1499.56 282.62,-1499.56 282.62,-1494.11 313.1,-1489.69 350.62,-1489.69 388.15,-1489.69 418.62,-1494.11 418.62,-1499.56 418.62,-1499.56 418.62,-1588.44 418.62,-1588.44"/>
<path fill="none" stroke="black" d="M418.62,-1588.44C418.62,-1582.99 388.15,-1578.56 350.62,-1578.56 313.1,-1578.56 282.62,-1582.99 282.62,-1588.44"/>
<text text-anchor="middle" x="350.62" y="-1568.1" font-family="Arial" font-size="12.00">patients</text>
<text text-anchor="middle" x="350.62" y="-1539.85" font-family="Arial" font-size="12.00">patient_id, user_id,</text>
<text text-anchor="middle" x="350.62" y="-1525.6" font-family="Arial" font-size="12.00">first_name, last_name,</text>
<text text-anchor="middle" x="350.62" y="-1511.35" font-family="Arial" font-size="12.00">dob</text>
</g>
<!-- pg_measurements -->
<g id="node4" class="node">
<title>pg_measurements</title>
<path fill="skyblue" stroke="black" d="M416.38,-1461.44C416.38,-1466.89 386.9,-1471.31 350.62,-1471.31 314.35,-1471.31 284.88,-1466.89 284.88,-1461.44 284.88,-1461.44 284.88,-1372.56 284.88,-1372.56 284.88,-1367.11 314.35,-1362.69 350.62,-1362.69 386.9,-1362.69 416.38,-1367.11 416.38,-1372.56 416.38,-1372.56 416.38,-1461.44 416.38,-1461.44"/>
<path fill="none" stroke="black" d="M416.38,-1461.44C416.38,-1455.99 386.9,-1451.56 350.62,-1451.56 314.35,-1451.56 284.88,-1455.99 284.88,-1461.44"/>
<text text-anchor="middle" x="350.62" y="-1441.1" font-family="Arial" font-size="12.00">measurements</text>
<text text-anchor="middle" x="350.62" y="-1412.85" font-family="Arial" font-size="12.00">id, patient_id,</text>
<text text-anchor="middle" x="350.62" y="-1398.6" font-family="Arial" font-size="12.00">biomarker_id,</text>
<text text-anchor="middle" x="350.62" y="-1384.35" font-family="Arial" font-size="12.00">value, unit, timestamp</text>
</g>
<!-- pg_documents -->
<g id="node5" class="node">
<title>pg_documents</title>
<path fill="skyblue" stroke="black" d="M407.38,-1334.44C407.38,-1339.89 381.94,-1344.31 350.62,-1344.31 319.31,-1344.31 293.88,-1339.89 293.88,-1334.44 293.88,-1334.44 293.88,-1245.56 293.88,-1245.56 293.88,-1240.11 319.31,-1235.69 350.62,-1235.69 381.94,-1235.69 407.38,-1240.11 407.38,-1245.56 407.38,-1245.56 407.38,-1334.44 407.38,-1334.44"/>
<path fill="none" stroke="black" d="M407.38,-1334.44C407.38,-1328.99 381.94,-1324.56 350.62,-1324.56 319.31,-1324.56 293.88,-1328.99 293.88,-1334.44"/>
<text text-anchor="middle" x="350.62" y="-1314.1" font-family="Arial" font-size="12.00">documents</text>
<text text-anchor="middle" x="350.62" y="-1285.85" font-family="Arial" font-size="12.00">doc_id, patient_id,</text>
<text text-anchor="middle" x="350.62" y="-1271.6" font-family="Arial" font-size="12.00">type, s3_url,</text>
<text text-anchor="middle" x="350.62" y="-1257.35" font-family="Arial" font-size="12.00">processing_status</text>
</g>
<!-- pg_alembic -->
<g id="node6" class="node">
<title>pg_alembic</title>
<path fill="lightgray" stroke="black" d="M410,-1893.41C410,-1896.89 383.39,-1899.72 350.62,-1899.72 317.86,-1899.72 291.25,-1896.89 291.25,-1893.41 291.25,-1893.41 291.25,-1836.59 291.25,-1836.59 291.25,-1833.11 317.86,-1830.28 350.62,-1830.28 383.39,-1830.28 410,-1833.11 410,-1836.59 410,-1836.59 410,-1893.41 410,-1893.41"/>
<path fill="none" stroke="black" d="M410,-1893.41C410,-1889.92 383.39,-1887.09 350.62,-1887.09 317.86,-1887.09 291.25,-1889.92 291.25,-1893.41"/>
<text text-anchor="middle" x="350.62" y="-1874.85" font-family="Arial" font-size="12.00">alembic_version</text>
<text text-anchor="middle" x="350.62" y="-1846.6" font-family="Arial" font-size="12.00">Schema migrations</text>
</g>
<!-- neo_patient_inst -->
<g id="node7" class="node">
<title>neo_patient_inst</title>
<path fill="green" stroke="black" d="M410,-678.42C410,-682.89 383.39,-686.52 350.62,-686.52 317.86,-686.52 291.25,-682.89 291.25,-678.42 291.25,-678.42 291.25,-605.58 291.25,-605.58 291.25,-601.11 317.86,-597.48 350.62,-597.48 383.39,-597.48 410,-601.11 410,-605.58 410,-605.58 410,-678.42 410,-678.42"/>
<path fill="none" stroke="black" d="M410,-678.42C410,-673.96 383.39,-670.33 350.62,-670.33 317.86,-670.33 291.25,-673.96 291.25,-678.42"/>
<text text-anchor="middle" x="350.62" y="-658.98" font-family="Arial" font-size="12.00">PatientInstance</text>
<text text-anchor="middle" x="350.62" y="-630.73" font-family="Arial" font-size="12.00">Tenant&#45;scoped</text>
<text text-anchor="middle" x="350.62" y="-616.48" font-family="Arial" font-size="12.00">Links to type nodes</text>
</g>
<!-- neo_biomarker_inst -->
<g id="node8" class="node">
<title>neo_biomarker_inst</title>
<path fill="green" stroke="black" d="M682.5,-464.42C682.5,-468.89 656.56,-472.52 624.62,-472.52 592.69,-472.52 566.75,-468.89 566.75,-464.42 566.75,-464.42 566.75,-391.58 566.75,-391.58 566.75,-387.11 592.69,-383.48 624.62,-383.48 656.56,-383.48 682.5,-387.11 682.5,-391.58 682.5,-391.58 682.5,-464.42 682.5,-464.42"/>
<path fill="none" stroke="black" d="M682.5,-464.42C682.5,-459.96 656.56,-456.33 624.62,-456.33 592.69,-456.33 566.75,-459.96 566.75,-464.42"/>
<text text-anchor="middle" x="624.62" y="-444.98" font-family="Arial" font-size="12.00">BiomarkerInstance</text>
<text text-anchor="middle" x="624.62" y="-416.73" font-family="Arial" font-size="12.00">Patient&#45;specific</text>
<text text-anchor="middle" x="624.62" y="-402.48" font-family="Arial" font-size="12.00">biomarker values</text>
</g>
<!-- neo_patient_inst&#45;&gt;neo_biomarker_inst -->
<g id="edge1" class="edge">
<title>neo_patient_inst&#45;&gt;neo_biomarker_inst</title>
<path fill="none" stroke="black" d="M410.4,-610.59C420.7,-605.89 431.45,-601.46 441.88,-598 486.96,-583.01 513.36,-611.67 546.88,-578 577.81,-546.92 543.46,-519.26 564.88,-481 565.21,-480.4 565.56,-479.8 565.91,-479.21"/>
<polygon fill="black" stroke="black" points="568.67,-481.37 571.47,-471.16 562.91,-477.4 568.67,-481.37"/>
<text text-anchor="middle" x="494.38" y="-600.5" font-family="Arial" font-size="10.00">HAS_MEASUREMENT</text>
</g>
<!-- neo_condition_inst -->
<g id="node9" class="node">
<title>neo_condition_inst</title>
<path fill="green" stroke="black" d="M681,-571.42C681,-575.89 655.73,-579.52 624.62,-579.52 593.52,-579.52 568.25,-575.89 568.25,-571.42 568.25,-571.42 568.25,-498.58 568.25,-498.58 568.25,-494.11 593.52,-490.48 624.62,-490.48 655.73,-490.48 681,-494.11 681,-498.58 681,-498.58 681,-571.42 681,-571.42"/>
<path fill="none" stroke="black" d="M681,-571.42C681,-566.96 655.73,-563.33 624.62,-563.33 593.52,-563.33 568.25,-566.96 568.25,-571.42"/>
<text text-anchor="middle" x="624.62" y="-551.98" font-family="Arial" font-size="12.00">ConditionInstance</text>
<text text-anchor="middle" x="624.62" y="-523.73" font-family="Arial" font-size="12.00">Patient&#45;specific</text>
<text text-anchor="middle" x="624.62" y="-509.48" font-family="Arial" font-size="12.00">conditions</text>
</g>
<!-- neo_patient_inst&#45;&gt;neo_condition_inst -->
<g id="edge2" class="edge">
<title>neo_patient_inst&#45;&gt;neo_condition_inst</title>
<path fill="none" stroke="black" d="M410.47,-635.6C463.65,-629.44 535.31,-620.04 546.88,-613 558.57,-605.88 555.74,-598.2 564.88,-588 565.68,-587.1 566.49,-586.21 567.32,-585.31"/>
<polygon fill="black" stroke="black" points="569.58,-588.01 573.99,-578.38 564.53,-583.16 569.58,-588.01"/>
<text text-anchor="middle" x="494.38" y="-634.28" font-family="Arial" font-size="10.00">HAS_CONDITION</text>
</g>
<!-- neo_medication_inst -->
<g id="node10" class="node">
<title>neo_medication_inst</title>
<path fill="green" stroke="black" d="M684.38,-678.42C684.38,-682.89 657.59,-686.52 624.62,-686.52 591.66,-686.52 564.88,-682.89 564.88,-678.42 564.88,-678.42 564.88,-605.58 564.88,-605.58 564.88,-601.11 591.66,-597.48 624.62,-597.48 657.59,-597.48 684.38,-601.11 684.38,-605.58 684.38,-605.58 684.38,-678.42 684.38,-678.42"/>
<path fill="none" stroke="black" d="M684.38,-678.42C684.38,-673.96 657.59,-670.33 624.62,-670.33 591.66,-670.33 564.88,-673.96 564.88,-678.42"/>
<text text-anchor="middle" x="624.62" y="-658.98" font-family="Arial" font-size="12.00">MedicationInstance</text>
<text text-anchor="middle" x="624.62" y="-630.73" font-family="Arial" font-size="12.00">Patient&#45;specific</text>
<text text-anchor="middle" x="624.62" y="-616.48" font-family="Arial" font-size="12.00">medications</text>
</g>
<!-- neo_patient_inst&#45;&gt;neo_medication_inst -->
<g id="edge3" class="edge">
<title>neo_patient_inst&#45;&gt;neo_medication_inst</title>
<path fill="none" stroke="black" d="M410.34,-646.47C420.83,-647.11 431.67,-647.66 441.88,-648 488.52,-649.55 500.24,-649.82 546.88,-648 548.94,-647.92 551.03,-647.83 553.15,-647.72"/>
<polygon fill="black" stroke="black" points="553.27,-651.22 563.06,-647.17 552.88,-644.23 553.27,-651.22"/>
<text text-anchor="middle" x="494.38" y="-651.77" font-family="Arial" font-size="10.00">TAKES_MEDICATION</text>
</g>
<!-- neo_biomarker_type -->
<g id="node11" class="node">
<title>neo_biomarker_type</title>
<path fill="lightgreen" stroke="black" d="M919.75,-464.42C919.75,-468.89 892.3,-472.52 858.5,-472.52 824.7,-472.52 797.25,-468.89 797.25,-464.42 797.25,-464.42 797.25,-391.58 797.25,-391.58 797.25,-387.11 824.7,-383.48 858.5,-383.48 892.3,-383.48 919.75,-387.11 919.75,-391.58 919.75,-391.58 919.75,-464.42 919.75,-464.42"/>
<path fill="none" stroke="black" d="M919.75,-464.42C919.75,-459.96 892.3,-456.33 858.5,-456.33 824.7,-456.33 797.25,-459.96 797.25,-464.42"/>
<text text-anchor="middle" x="858.5" y="-444.98" font-family="Arial" font-size="12.00">BiomarkerType</text>
<text text-anchor="middle" x="858.5" y="-416.73" font-family="Arial" font-size="12.00">Shared definitions</text>
<text text-anchor="middle" x="858.5" y="-402.48" font-family="Arial" font-size="12.00">glucose, cholesterol</text>
</g>
<!-- neo_biomarker_inst&#45;&gt;neo_biomarker_type -->
<g id="edge4" class="edge">
<title>neo_biomarker_inst&#45;&gt;neo_biomarker_type</title>
<path fill="none" stroke="black" d="M682.94,-428C713.89,-428 752.41,-428 785.38,-428"/>
<polygon fill="black" stroke="black" points="785.28,-431.5 795.28,-428 785.28,-424.5 785.28,-431.5"/>
<text text-anchor="middle" x="737.25" y="-430.5" font-family="Arial" font-size="10.00">INSTANCE_OF</text>
</g>
<!-- neo_condition_type -->
<g id="node12" class="node">
<title>neo_condition_type</title>
<path fill="lightgreen" stroke="black" d="M926.88,-571.42C926.88,-575.89 896.23,-579.52 858.5,-579.52 820.77,-579.52 790.12,-575.89 790.12,-571.42 790.12,-571.42 790.12,-498.58 790.12,-498.58 790.12,-494.11 820.77,-490.48 858.5,-490.48 896.23,-490.48 926.88,-494.11 926.88,-498.58 926.88,-498.58 926.88,-571.42 926.88,-571.42"/>
<path fill="none" stroke="black" d="M926.88,-571.42C926.88,-566.96 896.23,-563.33 858.5,-563.33 820.77,-563.33 790.12,-566.96 790.12,-571.42"/>
<text text-anchor="middle" x="858.5" y="-551.98" font-family="Arial" font-size="12.00">ConditionType</text>
<text text-anchor="middle" x="858.5" y="-523.73" font-family="Arial" font-size="12.00">Shared definitions</text>
<text text-anchor="middle" x="858.5" y="-509.48" font-family="Arial" font-size="12.00">diabetes, hypertension</text>
</g>
<!-- neo_condition_inst&#45;&gt;neo_condition_type -->
<g id="edge5" class="edge">
<title>neo_condition_inst&#45;&gt;neo_condition_type</title>
<path fill="none" stroke="black" d="M681.46,-535C710.59,-535 746.71,-535 778.65,-535"/>
<polygon fill="black" stroke="black" points="778.23,-538.5 788.23,-535 778.23,-531.5 778.23,-538.5"/>
<text text-anchor="middle" x="737.25" y="-537.5" font-family="Arial" font-size="10.00">INSTANCE_OF</text>
</g>
<!-- neo_medication_type -->
<g id="node13" class="node">
<title>neo_medication_type</title>
<path fill="lightgreen" stroke="black" d="M918.25,-678.42C918.25,-682.89 891.47,-686.52 858.5,-686.52 825.53,-686.52 798.75,-682.89 798.75,-678.42 798.75,-678.42 798.75,-605.58 798.75,-605.58 798.75,-601.11 825.53,-597.48 858.5,-597.48 891.47,-597.48 918.25,-601.11 918.25,-605.58 918.25,-605.58 918.25,-678.42 918.25,-678.42"/>
<path fill="none" stroke="black" d="M918.25,-678.42C918.25,-673.96 891.47,-670.33 858.5,-670.33 825.53,-670.33 798.75,-673.96 798.75,-678.42"/>
<text text-anchor="middle" x="858.5" y="-658.98" font-family="Arial" font-size="12.00">MedicationType</text>
<text text-anchor="middle" x="858.5" y="-630.73" font-family="Arial" font-size="12.00">Shared definitions</text>
<text text-anchor="middle" x="858.5" y="-616.48" font-family="Arial" font-size="12.00">metformin, lisinopril</text>
</g>
<!-- neo_medication_inst&#45;&gt;neo_medication_type -->
<g id="edge6" class="edge">
<title>neo_medication_inst&#45;&gt;neo_medication_type</title>
<path fill="none" stroke="black" d="M684.74,-642C715.94,-642 754.45,-642 787.18,-642"/>
<polygon fill="black" stroke="black" points="786.98,-645.5 796.98,-642 786.98,-638.5 786.98,-645.5"/>
<text text-anchor="middle" x="737.25" y="-644.5" font-family="Arial" font-size="10.00">INSTANCE_OF</text>
</g>
<!-- neo_body_system -->
<g id="node14" class="node">
<title>neo_body_system</title>
<path fill="lightgreen" stroke="black" d="M1118.38,-579.44C1118.38,-584.89 1093.78,-589.31 1063.5,-589.31 1033.22,-589.31 1008.62,-584.89 1008.62,-579.44 1008.62,-579.44 1008.62,-490.56 1008.62,-490.56 1008.62,-485.11 1033.22,-480.69 1063.5,-480.69 1093.78,-480.69 1118.38,-485.11 1118.38,-490.56 1118.38,-490.56 1118.38,-579.44 1118.38,-579.44"/>
<path fill="none" stroke="black" d="M1118.38,-579.44C1118.38,-573.99 1093.78,-569.56 1063.5,-569.56 1033.22,-569.56 1008.62,-573.99 1008.62,-579.44"/>
<text text-anchor="middle" x="1063.5" y="-559.1" font-family="Arial" font-size="12.00">BodySystemType</text>
<text text-anchor="middle" x="1063.5" y="-530.85" font-family="Arial" font-size="12.00">Shared hierarchy</text>
<text text-anchor="middle" x="1063.5" y="-516.6" font-family="Arial" font-size="12.00">cardiovascular,</text>
<text text-anchor="middle" x="1063.5" y="-502.35" font-family="Arial" font-size="12.00">endocrine</text>
</g>
<!-- neo_biomarker_type&#45;&gt;neo_body_system -->
<g id="edge7" class="edge">
<title>neo_biomarker_type&#45;&gt;neo_body_system</title>
<path fill="none" stroke="black" d="M920.13,-459.96C944.78,-472.95 973.28,-487.97 998.28,-501.15"/>
<polygon fill="black" stroke="black" points="996.57,-504.21 1007.05,-505.77 999.84,-498.01 996.57,-504.21"/>
<text text-anchor="middle" x="967.75" y="-496.73" font-family="Arial" font-size="10.00">AFFECTS</text>
</g>
<!-- neo_condition_type&#45;&gt;neo_body_system -->
<g id="edge8" class="edge">
<title>neo_condition_type&#45;&gt;neo_body_system</title>
<path fill="none" stroke="black" d="M927.1,-535C949.59,-535 974.59,-535 996.93,-535"/>
<polygon fill="black" stroke="black" points="996.82,-538.5 1006.82,-535 996.82,-531.5 996.82,-538.5"/>
<text text-anchor="middle" x="967.75" y="-537.5" font-family="Arial" font-size="10.00">AFFECTS</text>
</g>
<!-- neo_medication_type&#45;&gt;neo_body_system -->
<g id="edge9" class="edge">
<title>neo_medication_type&#45;&gt;neo_body_system</title>
<path fill="none" stroke="black" d="M918.49,-610.91C943.5,-597.73 972.71,-582.33 998.26,-568.86"/>
<polygon fill="black" stroke="black" points="999.67,-572.07 1006.89,-564.31 996.41,-565.88 999.67,-572.07"/>
<text text-anchor="middle" x="967.75" y="-597.41" font-family="Arial" font-size="10.00">TREATS</text>
</g>
<!-- redis_sessions -->
<g id="node15" class="node">
<title>redis_sessions</title>
<path fill="yellow" stroke="black" d="M404.38,-1164.42C404.38,-1168.89 380.28,-1172.52 350.62,-1172.52 320.97,-1172.52 296.88,-1168.89 296.88,-1164.42 296.88,-1164.42 296.88,-1091.58 296.88,-1091.58 296.88,-1087.11 320.97,-1083.48 350.62,-1083.48 380.28,-1083.48 404.38,-1087.11 404.38,-1091.58 404.38,-1091.58 404.38,-1164.42 404.38,-1164.42"/>
<path fill="none" stroke="black" d="M404.38,-1164.42C404.38,-1159.96 380.28,-1156.33 350.62,-1156.33 320.97,-1156.33 296.88,-1159.96 296.88,-1164.42"/>
<text text-anchor="middle" x="350.62" y="-1144.97" font-family="Arial" font-size="12.00">session:{user_id}</text>
<text text-anchor="middle" x="350.62" y="-1116.72" font-family="Arial" font-size="12.00">JWT token cache</text>
<text text-anchor="middle" x="350.62" y="-1102.47" font-family="Arial" font-size="12.00">TTL: 15min</text>
</g>
<!-- redis_patient_ctx -->
<g id="node16" class="node">
<title>redis_patient_ctx</title>
<path fill="yellow" stroke="black" d="M419,-863.42C419,-867.89 388.35,-871.52 350.62,-871.52 312.9,-871.52 282.25,-867.89 282.25,-863.42 282.25,-863.42 282.25,-790.58 282.25,-790.58 282.25,-786.11 312.9,-782.48 350.62,-782.48 388.35,-782.48 419,-786.11 419,-790.58 419,-790.58 419,-863.42 419,-863.42"/>
<path fill="none" stroke="black" d="M419,-863.42C419,-858.96 388.35,-855.33 350.62,-855.33 312.9,-855.33 282.25,-858.96 282.25,-863.42"/>
<text text-anchor="middle" x="350.62" y="-843.98" font-family="Arial" font-size="12.00">patient_ctx:{patient_id}</text>
<text text-anchor="middle" x="350.62" y="-815.73" font-family="Arial" font-size="12.00">Patient context cache</text>
<text text-anchor="middle" x="350.62" y="-801.48" font-family="Arial" font-size="12.00">TTL: 5min</text>
</g>
<!-- redis_pubsub -->
<g id="node17" class="node">
<title>redis_pubsub</title>
<path fill="yellow" stroke="black" d="M408.5,-970.42C408.5,-974.89 382.56,-978.52 350.62,-978.52 318.69,-978.52 292.75,-974.89 292.75,-970.42 292.75,-970.42 292.75,-897.58 292.75,-897.58 292.75,-893.11 318.69,-889.48 350.62,-889.48 382.56,-889.48 408.5,-893.11 408.5,-897.58 408.5,-897.58 408.5,-970.42 408.5,-970.42"/>
<path fill="none" stroke="black" d="M408.5,-970.42C408.5,-965.96 382.56,-962.33 350.62,-962.33 318.69,-962.33 292.75,-965.96 292.75,-970.42"/>
<text text-anchor="middle" x="350.62" y="-950.98" font-family="Arial" font-size="12.00">medical_events</text>
<text text-anchor="middle" x="350.62" y="-922.73" font-family="Arial" font-size="12.00">Pub/Sub channel</text>
<text text-anchor="middle" x="350.62" y="-908.48" font-family="Arial" font-size="12.00">WebSocket events</text>
</g>
<!-- redis_rate_limit -->
<g id="node18" class="node">
<title>redis_rate_limit</title>
<path fill="yellow" stroke="black" d="M408.12,-1059.41C408.12,-1062.89 382.35,-1065.72 350.62,-1065.72 318.9,-1065.72 293.12,-1062.89 293.12,-1059.41 293.12,-1059.41 293.12,-1002.59 293.12,-1002.59 293.12,-999.11 318.9,-996.28 350.62,-996.28 382.35,-996.28 408.12,-999.11 408.12,-1002.59 408.12,-1002.59 408.12,-1059.41 408.12,-1059.41"/>
<path fill="none" stroke="black" d="M408.12,-1059.41C408.12,-1055.92 382.35,-1053.09 350.62,-1053.09 318.9,-1053.09 293.12,-1055.92 293.12,-1059.41"/>
<text text-anchor="middle" x="350.62" y="-1040.85" font-family="Arial" font-size="12.00">rate_limit:{user_id}</text>
<text text-anchor="middle" x="350.62" y="-1012.6" font-family="Arial" font-size="12.00">API rate limiting</text>
</g>
<!-- qdrant_biomarkers -->
<g id="node19" class="node">
<title>qdrant_biomarkers</title>
<path fill="pink" stroke="black" d="M417.12,-97.42C417.12,-101.89 387.32,-105.52 350.62,-105.52 313.93,-105.52 284.12,-101.89 284.12,-97.42 284.12,-97.42 284.12,-24.58 284.12,-24.58 284.12,-20.11 313.93,-16.48 350.62,-16.48 387.32,-16.48 417.12,-20.11 417.12,-24.58 417.12,-24.58 417.12,-97.42 417.12,-97.42"/>
<path fill="none" stroke="black" d="M417.12,-97.42C417.12,-92.96 387.32,-89.33 350.62,-89.33 313.93,-89.33 284.12,-92.96 284.12,-97.42"/>
<text text-anchor="middle" x="350.62" y="-77.97" font-family="Arial" font-size="12.00">biomarkers_collection</text>
<text text-anchor="middle" x="350.62" y="-49.73" font-family="Arial" font-size="12.00">Vector embeddings</text>
<text text-anchor="middle" x="350.62" y="-35.48" font-family="Arial" font-size="12.00">for biomarker search</text>
</g>
<!-- qdrant_conditions -->
<g id="node20" class="node">
<title>qdrant_conditions</title>
<path fill="pink" stroke="black" d="M414.88,-311.42C414.88,-315.89 386.08,-319.52 350.62,-319.52 315.17,-319.52 286.38,-315.89 286.38,-311.42 286.38,-311.42 286.38,-238.58 286.38,-238.58 286.38,-234.11 315.17,-230.48 350.62,-230.48 386.08,-230.48 414.88,-234.11 414.88,-238.58 414.88,-238.58 414.88,-311.42 414.88,-311.42"/>
<path fill="none" stroke="black" d="M414.88,-311.42C414.88,-306.96 386.08,-303.33 350.62,-303.33 315.17,-303.33 286.38,-306.96 286.38,-311.42"/>
<text text-anchor="middle" x="350.62" y="-291.98" font-family="Arial" font-size="12.00">conditions_collection</text>
<text text-anchor="middle" x="350.62" y="-263.73" font-family="Arial" font-size="12.00">Vector embeddings</text>
<text text-anchor="middle" x="350.62" y="-249.47" font-family="Arial" font-size="12.00">for condition search</text>
</g>
<!-- qdrant_medications -->
<g id="node21" class="node">
<title>qdrant_medications</title>
<path fill="pink" stroke="black" d="M419.75,-204.42C419.75,-208.89 388.77,-212.52 350.62,-212.52 312.48,-212.52 281.5,-208.89 281.5,-204.42 281.5,-204.42 281.5,-131.58 281.5,-131.58 281.5,-127.11 312.48,-123.48 350.62,-123.48 388.77,-123.48 419.75,-127.11 419.75,-131.58 419.75,-131.58 419.75,-204.42 419.75,-204.42"/>
<path fill="none" stroke="black" d="M419.75,-204.42C419.75,-199.96 388.77,-196.33 350.62,-196.33 312.48,-196.33 281.5,-199.96 281.5,-204.42"/>
<text text-anchor="middle" x="350.62" y="-184.97" font-family="Arial" font-size="12.00">medications_collection</text>
<text text-anchor="middle" x="350.62" y="-156.72" font-family="Arial" font-size="12.00">Vector embeddings</text>
<text text-anchor="middle" x="350.62" y="-142.47" font-family="Arial" font-size="12.00">for medication search</text>
</g>
<!-- auth_svc -->
<g id="node22" class="node">
<title>auth_svc</title>
<polygon fill="lightgray" stroke="black" points="131.38,-998 47.12,-998 47.12,-962 131.38,-962 131.38,-998"/>
<text text-anchor="middle" x="89.25" y="-975.73" font-family="Arial" font-size="12.00">Auth Service</text>
</g>
<!-- auth_svc&#45;&gt;pg_users -->
<g id="edge10" class="edge">
<title>auth_svc&#45;&gt;pg_users</title>
<path fill="none" stroke="black" d="M131.44,-993.21C148.37,-1000.86 166.32,-1012.36 176.38,-1029 207.47,-1080.48 179.03,-1511.85 194.38,-1570 212.94,-1640.35 221.74,-1660.88 270.38,-1715 275.43,-1720.62 281.2,-1725.93 287.28,-1730.85"/>
<polygon fill="black" stroke="black" points="285.08,-1733.57 295.15,-1736.86 289.32,-1728.01 285.08,-1733.57"/>
<text text-anchor="middle" x="227.38" y="-1705.11" font-family="Arial" font-size="10.00">Read/Write</text>
</g>
<!-- auth_svc&#45;&gt;pg_sessions -->
<g id="edge11" class="edge">
<title>auth_svc&#45;&gt;pg_sessions</title>
<path fill="none" stroke="black" d="M131.8,-994.47C148.16,-1002.23 165.58,-1013.46 176.38,-1029 185.66,-1042.36 261.64,-1593.28 270.38,-1607 273.43,-1611.79 277.07,-1616.27 281.1,-1620.42"/>
<polygon fill="black" stroke="black" points="278.45,-1622.74 288.15,-1626.99 283.22,-1617.61 278.45,-1622.74"/>
<text text-anchor="middle" x="227.38" y="-1556.14" font-family="Arial" font-size="10.00">Read/Write</text>
</g>
<!-- auth_svc&#45;&gt;redis_sessions -->
<g id="edge12" class="edge">
<title>auth_svc&#45;&gt;redis_sessions</title>
<path fill="none" stroke="black" d="M122.57,-998.37C138.73,-1007.56 158.59,-1018.86 176.38,-1029 212.92,-1049.84 253.78,-1073.18 286.64,-1091.97"/>
<polygon fill="black" stroke="black" points="284.83,-1094.97 295.25,-1096.89 288.3,-1088.89 284.83,-1094.97"/>
<text text-anchor="middle" x="227.38" y="-1077.57" font-family="Arial" font-size="10.00">Cache</text>
</g>
<!-- auth_svc&#45;&gt;redis_rate_limit -->
<g id="edge13" class="edge">
<title>auth_svc&#45;&gt;redis_rate_limit</title>
<path fill="none" stroke="black" d="M131.74,-992.9C150.7,-998.44 173.53,-1004.64 194.38,-1009 222.7,-1014.93 254.28,-1019.72 281.52,-1023.31"/>
<polygon fill="black" stroke="black" points="281.04,-1026.78 291.4,-1024.58 281.93,-1019.83 281.04,-1026.78"/>
<text text-anchor="middle" x="227.38" y="-1022.54" font-family="Arial" font-size="10.00">Rate limit</text>
</g>
<!-- graph_svc -->
<g id="node23" class="node">
<title>graph_svc</title>
<polygon fill="lightgray" stroke="black" points="135.5,-836 43,-836 43,-800 135.5,-800 135.5,-836"/>
<text text-anchor="middle" x="89.25" y="-813.73" font-family="Arial" font-size="12.00">Graph Service</text>
</g>
<!-- graph_svc&#45;&gt;neo_patient_inst -->
<g id="edge14" class="edge">
<title>graph_svc&#45;&gt;neo_patient_inst</title>
<path fill="none" stroke="black" d="M135.93,-807.44C149.42,-803.34 163.91,-797.92 176.38,-791 222.89,-765.16 268.23,-725.49 300.85,-693.58"/>
<polygon fill="black" stroke="black" points="303.14,-696.24 307.78,-686.71 298.21,-691.26 303.14,-696.24"/>
<text text-anchor="middle" x="227.38" y="-780.77" font-family="Arial" font-size="10.00">Cypher queries</text>
</g>
<!-- graph_svc&#45;&gt;redis_patient_ctx -->
<g id="edge15" class="edge">
<title>graph_svc&#45;&gt;redis_patient_ctx</title>
<path fill="none" stroke="black" d="M135.77,-817.24C170.05,-816.91 218.19,-816.99 260.38,-819 263.76,-819.16 267.22,-819.35 270.71,-819.57"/>
<polygon fill="black" stroke="black" points="270.2,-823.04 280.42,-820.23 270.68,-816.06 270.2,-823.04"/>
<text text-anchor="middle" x="227.38" y="-821.5" font-family="Arial" font-size="10.00">Cache</text>
</g>
<!-- med_data_svc -->
<g id="node24" class="node">
<title>med_data_svc</title>
<polygon fill="lightgray" stroke="black" points="154.25,-944 24.25,-944 24.25,-908 154.25,-908 154.25,-944"/>
<text text-anchor="middle" x="89.25" y="-921.73" font-family="Arial" font-size="12.00">Medical Data Service</text>
</g>
<!-- med_data_svc&#45;&gt;pg_patients -->
<g id="edge16" class="edge">
<title>med_data_svc&#45;&gt;pg_patients</title>
<path fill="none" stroke="black" d="M154.65,-941.75C162.27,-944.88 169.7,-948.6 176.38,-953 186.64,-959.77 184.08,-967.28 194.38,-974 220.04,-990.75 241.86,-969.57 260.38,-994 276.69,-1015.52 258.48,-1455.75 270.38,-1480 271.84,-1482.98 273.51,-1485.86 275.35,-1488.65"/>
<polygon fill="black" stroke="black" points="272.5,-1490.68 281.32,-1496.56 278.09,-1486.47 272.5,-1490.68"/>
<text text-anchor="middle" x="227.38" y="-996.5" font-family="Arial" font-size="10.00">Read/Write</text>
</g>
<!-- med_data_svc&#45;&gt;pg_measurements -->
<g id="edge17" class="edge">
<title>med_data_svc&#45;&gt;pg_measurements</title>
<path fill="none" stroke="black" d="M154.52,-935.69C199.73,-943.16 253.38,-953.59 260.38,-962 274.27,-978.7 260.76,-1333.52 270.38,-1353 272.34,-1356.99 274.69,-1360.81 277.32,-1364.46"/>
<polygon fill="black" stroke="black" points="274.43,-1366.45 283.45,-1372.01 279.86,-1362.04 274.43,-1366.45"/>
<text text-anchor="middle" x="227.38" y="-964.5" font-family="Arial" font-size="10.00">Read/Write</text>
</g>
<!-- med_data_svc&#45;&gt;pg_documents -->
<g id="edge18" class="edge">
<title>med_data_svc&#45;&gt;pg_documents</title>
<path fill="none" stroke="black" d="M150.83,-907.5C187.4,-900.41 232.21,-899.61 260.38,-927 284.04,-950.02 255.86,-1194.34 270.38,-1224 274.25,-1231.92 279.56,-1239.23 285.62,-1245.88"/>
<polygon fill="black" stroke="black" points="283.03,-1248.24 292.57,-1252.86 288,-1243.3 283.03,-1248.24"/>
<text text-anchor="middle" x="227.38" y="-929.5" font-family="Arial" font-size="10.00">Read/Write</text>
</g>
<!-- med_data_svc&#45;&gt;neo_biomarker_inst -->
<g id="edge19" class="edge">
<title>med_data_svc&#45;&gt;neo_biomarker_inst</title>
<path fill="none" stroke="black" d="M153.36,-907.6C199,-893.66 253.75,-875.37 260.38,-866 278.99,-839.67 252.06,-602.53 270.38,-576 335.23,-482.06 471.96,-447.56 555,-435.02"/>
<polygon fill="black" stroke="black" points="555.45,-438.49 564.85,-433.61 554.46,-431.56 555.45,-438.49"/>
<text text-anchor="middle" x="350.62" y="-578.5" font-family="Arial" font-size="10.00">Graph relations</text>
</g>
<!-- catalog_svc -->
<g id="node25" class="node">
<title>catalog_svc</title>
<polygon fill="lightgray" stroke="black" points="162.5,-782 16,-782 16,-746 162.5,-746 162.5,-782"/>
<text text-anchor="middle" x="89.25" y="-759.73" font-family="Arial" font-size="12.00">Medical Catalog Service</text>
</g>
<!-- catalog_svc&#45;&gt;qdrant_biomarkers -->
<g id="edge20" class="edge">
<title>catalog_svc&#45;&gt;qdrant_biomarkers</title>
<path fill="none" stroke="black" d="M90.2,-745.58C90.9,-662.38 104.11,-316.88 270.38,-114 271.99,-112.02 273.71,-110.09 275.5,-108.21"/>
<polygon fill="black" stroke="black" points="277.89,-110.76 282.68,-101.31 273.04,-105.71 277.89,-110.76"/>
<text text-anchor="middle" x="227.38" y="-223.18" font-family="Arial" font-size="10.00">Vector search</text>
</g>
<!-- catalog_svc&#45;&gt;qdrant_conditions -->
<g id="edge21" class="edge">
<title>catalog_svc&#45;&gt;qdrant_conditions</title>
<path fill="none" stroke="black" d="M101.46,-745.79C131.72,-695.81 215.82,-551.53 260.38,-421 267.7,-399.55 260.65,-391.47 270.38,-371 277.68,-355.63 287.99,-340.63 298.77,-327.23"/>
<polygon fill="black" stroke="black" points="301.22,-329.76 304.92,-319.83 295.84,-325.28 301.22,-329.76"/>
<text text-anchor="middle" x="227.38" y="-577.88" font-family="Arial" font-size="10.00">Vector search</text>
</g>
<!-- catalog_svc&#45;&gt;qdrant_medications -->
<g id="edge22" class="edge">
<title>catalog_svc&#45;&gt;qdrant_medications</title>
<path fill="none" stroke="black" d="M93.26,-745.64C102.64,-691.35 134.36,-527.71 194.38,-405 216.33,-360.12 242.43,-360.63 260.38,-314 275.3,-275.2 248.85,-256.57 270.38,-221 271.5,-219.14 272.72,-217.33 274.02,-215.58"/>
<polygon fill="black" stroke="black" points="276.33,-218.26 280.14,-208.37 271,-213.72 276.33,-218.26"/>
<text text-anchor="middle" x="227.38" y="-407.5" font-family="Arial" font-size="10.00">Vector search</text>
</g>
<!-- websocket_svc -->
<g id="node26" class="node">
<title>websocket_svc</title>
<polygon fill="lightgray" stroke="black" points="149.75,-890 28.75,-890 28.75,-854 149.75,-854 149.75,-890"/>
<text text-anchor="middle" x="89.25" y="-867.73" font-family="Arial" font-size="12.00">WebSocket Service</text>
</g>
<!-- websocket_svc&#45;&gt;redis_pubsub -->
<g id="edge23" class="edge">
<title>websocket_svc&#45;&gt;redis_pubsub</title>
<path fill="none" stroke="black" d="M150.22,-874.33C183.23,-876.77 224.63,-881.78 260.38,-892 267.57,-894.06 274.9,-896.63 282.12,-899.49"/>
<polygon fill="black" stroke="black" points="280.61,-902.66 291.19,-903.27 283.31,-896.19 280.61,-902.66"/>
<text text-anchor="middle" x="227.38" y="-894.5" font-family="Arial" font-size="10.00">Pub/Sub</text>
</g>
<!-- note1 -->
<g id="node27" class="node">
<title>note1</title>
<polygon fill="white" stroke="black" points="151.62,-1113.75 20.88,-1113.75 20.88,-1038.25 157.62,-1038.25 157.62,-1107.75 151.62,-1113.75"/>
<polyline fill="none" stroke="black" points="151.62,-1113.75 151.62,-1107.75"/>
<polyline fill="none" stroke="black" points="157.62,-1107.75 151.62,-1107.75"/>
<text text-anchor="middle" x="89.25" y="-1099.3" font-family="Arial" font-size="11.00">PostgreSQL:</text>
<text text-anchor="middle" x="89.25" y="-1085.8" font-family="Arial" font-size="11.00">&#45; User authentication</text>
<text text-anchor="middle" x="89.25" y="-1072.3" font-family="Arial" font-size="11.00">&#45; Session management</text>
<text text-anchor="middle" x="89.25" y="-1058.8" font-family="Arial" font-size="11.00">&#45; Structured medical data</text>
<text text-anchor="middle" x="89.25" y="-1045.3" font-family="Arial" font-size="11.00">&#45; Document metadata</text>
</g>
<!-- note2 -->
<g id="node28" class="node">
<title>note2</title>
<polygon fill="white" stroke="black" points="170.38,-1207.75 2.12,-1207.75 2.12,-1132.25 176.38,-1132.25 176.38,-1201.75 170.38,-1207.75"/>
<polyline fill="none" stroke="black" points="170.38,-1207.75 170.38,-1201.75"/>
<polyline fill="none" stroke="black" points="176.38,-1201.75 170.38,-1201.75"/>
<text text-anchor="middle" x="89.25" y="-1193.3" font-family="Arial" font-size="11.00">Neo4j Instance→Type:</text>
<text text-anchor="middle" x="89.25" y="-1179.8" font-family="Arial" font-size="11.00">&#45; Instance nodes: Patient&#45;specific</text>
<text text-anchor="middle" x="89.25" y="-1166.3" font-family="Arial" font-size="11.00">&#45; Type nodes: Shared definitions</text>
<text text-anchor="middle" x="89.25" y="-1152.8" font-family="Arial" font-size="11.00">&#45; Multi&#45;tenant isolation</text>
<text text-anchor="middle" x="89.25" y="-1139.3" font-family="Arial" font-size="11.00">&#45; Rich relationships</text>
</g>
<!-- note3 -->
<g id="node29" class="node">
<title>note3</title>
<polygon fill="white" stroke="black" points="155,-1301.75 17.5,-1301.75 17.5,-1226.25 161,-1226.25 161,-1295.75 155,-1301.75"/>
<polyline fill="none" stroke="black" points="155,-1301.75 155,-1295.75"/>
<polyline fill="none" stroke="black" points="161,-1295.75 155,-1295.75"/>
<text text-anchor="middle" x="89.25" y="-1287.3" font-family="Arial" font-size="11.00">Redis:</text>
<text text-anchor="middle" x="89.25" y="-1273.8" font-family="Arial" font-size="11.00">&#45; Hot cache (5&#45;15min TTL)</text>
<text text-anchor="middle" x="89.25" y="-1260.3" font-family="Arial" font-size="11.00">&#45; Real&#45;time Pub/Sub</text>
<text text-anchor="middle" x="89.25" y="-1246.8" font-family="Arial" font-size="11.00">&#45; Rate limiting</text>
<text text-anchor="middle" x="89.25" y="-1233.3" font-family="Arial" font-size="11.00">&#45; Session tokens</text>
</g>
<!-- note4 -->
<g id="node30" class="node">
<title>note4</title>
<polygon fill="white" stroke="black" points="148.62,-1395.75 23.88,-1395.75 23.88,-1320.25 154.62,-1320.25 154.62,-1389.75 148.62,-1395.75"/>
<polyline fill="none" stroke="black" points="148.62,-1395.75 148.62,-1389.75"/>
<polyline fill="none" stroke="black" points="154.62,-1389.75 148.62,-1389.75"/>
<text text-anchor="middle" x="89.25" y="-1381.3" font-family="Arial" font-size="11.00">Qdrant:</text>
<text text-anchor="middle" x="89.25" y="-1367.8" font-family="Arial" font-size="11.00">&#45; Semantic search</text>
<text text-anchor="middle" x="89.25" y="-1354.3" font-family="Arial" font-size="11.00">&#45; Biomarker lookup</text>
<text text-anchor="middle" x="89.25" y="-1340.8" font-family="Arial" font-size="11.00">&#45; Medical term matching</text>
<text text-anchor="middle" x="89.25" y="-1327.3" font-family="Arial" font-size="11.00">&#45; Vector embeddings</text>
</g>
</g>
</svg>
