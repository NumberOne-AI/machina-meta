<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (0)
 -->
<!-- Title: SecurityLayers Pages: 1 -->
<svg width="523pt" height="475pt"
 viewBox="0.00 0.00 523.38 475.19" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 471.19)">
<title>SecurityLayers</title>
<polygon fill="#f5f5f5" stroke="none" points="-4,4 -4,-471.19 519.38,-471.19 519.38,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_public</title>
<polygon fill="mistyrose" stroke="black" points="24,-383.44 24,-459.19 128,-459.19 128,-383.44 24,-383.44"/>
<text text-anchor="middle" x="76" y="-441.89" font-family="Arial" font-size="14.00">Public Internet</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_dmz</title>
<polygon fill="lightyellow" stroke="black" points="16,-236.44 16,-312.69 136,-312.69 136,-236.44 16,-236.44"/>
<text text-anchor="middle" x="76" y="-295.39" font-family="Arial" font-size="14.00">DMZ</text>
</g>
<g id="clust3" class="cluster">
<title>cluster_private</title>
<polygon fill="lightgreen" stroke="black" points="8,-8 8,-194.44 144,-194.44 144,-8 8,-8"/>
<text text-anchor="middle" x="76" y="-177.14" font-family="Arial" font-size="14.00">Private Network</text>
</g>
<!-- User -->
<g id="node1" class="node">
<title>User</title>
<polygon fill="lightblue" stroke="black" points="120.38,-427.44 31.62,-427.44 31.62,-391.44 120.38,-391.44 120.38,-427.44"/>
<text text-anchor="middle" x="76" y="-405.16" font-family="Arial" font-size="12.00">User Browser</text>
</g>
<!-- Frontend -->
<g id="node2" class="node">
<title>Frontend</title>
<polygon fill="lightyellow" stroke="black" points="127.88,-280.94 24.12,-280.94 24.12,-244.44 127.88,-244.44 127.88,-280.94"/>
<text text-anchor="middle" x="76" y="-265.54" font-family="Arial" font-size="12.00">Next.js Frontend</text>
<text text-anchor="middle" x="76" y="-251.29" font-family="Arial" font-size="12.00">HTTPS enabled</text>
</g>
<!-- User&#45;&gt;Frontend -->
<g id="edge1" class="edge">
<title>User&#45;&gt;Frontend</title>
<path fill="none" stroke="black" d="M76,-390.98C76,-366.52 76,-321.78 76,-292.39"/>
<polygon fill="black" stroke="black" points="79.5,-292.72 76,-282.72 72.5,-292.72 79.5,-292.72"/>
<text text-anchor="middle" x="109" y="-335.19" font-family="Arial" font-size="10.00">HTTPS</text>
<text text-anchor="middle" x="109" y="-323.19" font-family="Arial" font-size="10.00">TLS encryption</text>
</g>
<!-- Backend -->
<g id="node3" class="node">
<title>Backend</title>
<polygon fill="lightgreen" stroke="black" points="135.75,-162.69 16.25,-162.69 16.25,-126.19 135.75,-126.19 135.75,-162.69"/>
<text text-anchor="middle" x="76" y="-147.29" font-family="Arial" font-size="12.00">FastAPI Backend</text>
<text text-anchor="middle" x="76" y="-133.04" font-family="Arial" font-size="12.00">JWT Authentication</text>
</g>
<!-- Frontend&#45;&gt;Backend -->
<g id="edge2" class="edge">
<title>Frontend&#45;&gt;Backend</title>
<path fill="none" stroke="black" d="M76,-244.03C76,-225.49 76,-196.04 76,-174.15"/>
<polygon fill="black" stroke="black" points="79.5,-174.39 76,-164.39 72.5,-174.39 79.5,-174.39"/>
<text text-anchor="middle" x="113.88" y="-216.94" font-family="Arial" font-size="10.00">Internal Network</text>
<text text-anchor="middle" x="113.88" y="-204.94" font-family="Arial" font-size="10.00">No public access</text>
</g>
<!-- Databases -->
<g id="node4" class="node">
<title>Databases</title>
<path fill="skyblue" stroke="black" d="M126.25,-61.62C126.25,-64.14 101.49,-66.19 71,-66.19 40.51,-66.19 15.75,-64.14 15.75,-61.62 15.75,-61.62 15.75,-20.56 15.75,-20.56 15.75,-18.04 40.51,-16 71,-16 101.49,-16 126.25,-18.04 126.25,-20.56 126.25,-20.56 126.25,-61.62 126.25,-61.62"/>
<path fill="none" stroke="black" d="M126.25,-61.62C126.25,-59.11 101.49,-57.06 71,-57.06 40.51,-57.06 15.75,-59.11 15.75,-61.62"/>
<text text-anchor="middle" x="71" y="-43.94" font-family="Arial" font-size="12.00">Databases</text>
<text text-anchor="middle" x="71" y="-29.69" font-family="Arial" font-size="12.00">No Public Access</text>
</g>
<!-- Backend&#45;&gt;Databases -->
<g id="edge3" class="edge">
<title>Backend&#45;&gt;Databases</title>
<path fill="none" stroke="black" d="M75.13,-125.78C74.48,-112.55 73.56,-93.99 72.76,-77.72"/>
<polygon fill="black" stroke="black" points="76.26,-77.7 72.27,-67.89 69.27,-78.05 76.26,-77.7"/>
<text text-anchor="middle" x="112.11" y="-98.69" font-family="Arial" font-size="10.00">Internal Network</text>
<text text-anchor="middle" x="112.11" y="-86.69" font-family="Arial" font-size="10.00">No public access</text>
</g>
<!-- SecurityNote -->
<g id="node5" class="node">
<title>SecurityNote</title>
<polygon fill="lightyellow" stroke="black" stroke-dasharray="5,2" points="509.38,-456.19 138.62,-456.19 138.62,-362.69 515.38,-362.69 515.38,-450.19 509.38,-456.19"/>
<polyline fill="none" stroke="black" stroke-dasharray="5,2" points="509.38,-456.19 509.38,-450.19"/>
<polyline fill="none" stroke="black" stroke-dasharray="5,2" points="515.38,-450.19 509.38,-450.19"/>
<text text-anchor="middle" x="327" y="-440.79" font-family="Arial" font-size="12.00">Security Layers:</text>
<text text-anchor="middle" x="327" y="-426.54" font-family="Arial" font-size="12.00">1. HTTPS &#45; TLS encryption for frontend</text>
<text text-anchor="middle" x="327" y="-412.29" font-family="Arial" font-size="12.00">2. JWT Authentication &#45; Token&#45;based auth with HTTP&#45;only cookies</text>
<text text-anchor="middle" x="327" y="-398.04" font-family="Arial" font-size="12.00">3. Network Isolation &#45; Databases not publicly accessible</text>
<text text-anchor="middle" x="327" y="-383.79" font-family="Arial" font-size="12.00">4. Patient Context Headers &#45; X&#45;Patient&#45;Context&#45;ID for tenant scoping</text>
<text text-anchor="middle" x="327" y="-369.54" font-family="Arial" font-size="12.00">5. Service Account &#45; GCP authentication for Gemini API</text>
</g>
</g>
</svg>
